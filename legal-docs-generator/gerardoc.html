<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Gerador de Documentos Trabalhistas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <style>
        .container { max-width: 800px; }
        .form-section { margin-bottom: 2rem; }
        h2 { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 0.5rem; }
        .required::after { content: "*"; color: red; margin-left: 3px; }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">Dados da Reclamação Trabalhista</h1>
        
        <form id="docForm" onsubmit="processarFormulario(event)">
            <!-- Seção de Dados Pessoais -->
            <div class="form-section">
                <h2>Dados do Reclamante</h2>
                
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label required">Nome Completo</label>
                        <input type="text" class="form-control" id="RECLAMANTE_NOME" required>
                    </div>
                    
                    <div class="col-md-3">
                        <label class="form-label required">Nacionalidade</label>
                        <select class="form-select" id="RECLAMANTE_NACIONALIDADE" required>
                            <option selected>Brasileiro(a)</option>
                            <option>Outra</option>
                        </select>
                    </div>
                </div>
                
                <!-- Continue com todos os outros campos seguindo o mesmo padrão -->
                
            </div>
            
<!-- Adicione esta seção antes do botão de submit -->
<div class="form-section">
    <h2>Papel Timbrado</h2>
    <div class="mb-3">
        <label class="form-label">Upload do Timbrado (PDF)</label>
        <input type="file" 
               class="form-control" 
               id="timbradoUpload" 
               accept=".pdf"
               onchange="handleTimbradoUpload(event)">
        <div class="form-text">O arquivo deve ter fundo transparente ou branco</div>
    </div>
</div>


<!-- Novo campo no formulário -->
<div class="form-section">
    <h2>Configurações de Timbrado</h2>
    <div class="alert alert-info">
        <p>Para usar papel timbrado:</p>
        <ol>
            <li>Gere o documento normalmente</li>
            <li>Na próxima tela, use o botão "Adicionar Timbrado"</li>
        </ol>
    </div>
</div>


            <button type="submit" class="btn btn-primary">Gerar Documento</button>
        </form>
    </div>

    <script>
        // Aplicar máscaras
        $(document).ready(function(){
            $('#RECLAMANTE_CPF').mask('000.000.000-00');
            $('#RECLAMANTE_RG').mask('00.000.000-0');
            $('#RECLAMADA_CNPJ').mask('00.000.000/0000-00');
        });

        function formatarTexto(texto) {
            return texto.toLowerCase().replace(/(?:^|\s)\S/g, function(a) { return a.toUpperCase(); });
        }

        function processarFormulario(e) {
            e.preventDefault();
            
            // Coletar e formatar todos os dados
            let dados = {};
            document.querySelectorAll('#docForm input, #docForm select').forEach(element => {
                let valor = element.value;
                
                // Aplicar formatação específica
                if(element.id.includes('DATA')) {
                    const [ano, mes, dia] = valor.split('-');
                    const meses = ["janeiro", "fevereiro", "março", "abril", "maio", "junho", 
                                 "julho", "agosto", "setembro", "outubro", "novembro", "dezembro"];
                    valor = `${dia} de ${meses[parseInt(mes)-1]} de ${ano}`;
                }
                
                dados[element.id] = formatarTexto(valor);
            });
            
            localStorage.setItem('dadosDocumento', JSON.stringify(dados));
            window.location.href = 'documento-gerado.html';
        }

function handleTimbradoUpload(event) {
    const file = event.target.files[0];
    if (file && file.type === "application/pdf") {
        const reader = new FileReader();
        
        reader.onload = function(e) {
            // Converter para Data URL e salvar no LocalStorage
            localStorage.setItem('timbradoData', e.target.result);
        };
        
        reader.readAsDataURL(file);
    } else {
        alert('Por favor, selecione um arquivo PDF válido');
    }
}

    </script>
</body>
</html>